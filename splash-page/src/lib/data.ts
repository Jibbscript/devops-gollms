export const IMAGES = {
  hero: "https://private-us-east-1.manuscdn.com/sessionFile/rNXhLMUAC9vEf8SHfsJjYM/sandbox/hh8BPQB5CV4rTCbMBOoRqR-img-1_1770494957000_na1fn_aGVyby1ibHVlcHJpbnQ.png?x-oss-process=image/resize,w_1920,h_1920/format,webp/quality,q_80&Expires=1798761600&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9wcml2YXRlLXVzLWVhc3QtMS5tYW51c2Nkbi5jb20vc2Vzc2lvbkZpbGUvck5YaExNVUFDOXZFZjhTSGZzSmpZTS9zYW5kYm94L2hoOEJQUUI1Q1Y0clRDYk1CT29ScVItaW1nLTFfMTc3MDQ5NDk1NzAwMF9uYTFmbl9hR1Z5YnkxaWJIVmxjSEpwYm5RLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzE5MjAsaF8xOTIwL2Zvcm1hdCx3ZWJwL3F1YWxpdHkscV84MCIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTc5ODc2MTYwMH19fV19&Key-Pair-Id=K2HSFNDJXOU9YS&Signature=mlxL770DEFbIS-sNlAeS5IS4ax24Zx5HH1uiHLndQszoeH0VroqHzz6diHM4SYIjOoKH129Rd~UqpIhGjM4Zo9ZiaDiwNeXUhtUIU2Nbhf1iKbUTTioODqIyp8-G1cr1lXvRAavNHwooqMJ-z-wV9kexBwlzrLRsgi7blfNE-FcHbUfihmsQFBzxrxj~zd01N7ELAw2T2k9~SVyCXZx44lFa~vXWiRO5sOryVmKYHJfNfspEmsMMwXXTrGtNqcjDhHZtQM0u8gt-WNsqd-9hFaygZxDB2Smy5Db4P~i5VXkQm2kGjpcAwBOJjuKC5-BHz9nQwjN3iIFKACS7-Wb-DA__",
  triage: "https://private-us-east-1.manuscdn.com/sessionFile/rNXhLMUAC9vEf8SHfsJjYM/sandbox/hh8BPQB5CV4rTCbMBOoRqR-img-2_1770494952000_na1fn_YWdlbnQtdHJpYWdl.png?x-oss-process=image/resize,w_1920,h_1920/format,webp/quality,q_80&Expires=1798761600&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9wcml2YXRlLXVzLWVhc3QtMS5tYW51c2Nkbi5jb20vc2Vzc2lvbkZpbGUvck5YaExNVUFDOXZFZjhTSGZzSmpZTS9zYW5kYm94L2hoOEJQUUI1Q1Y0clRDYk1CT29ScVItaW1nLTJfMTc3MDQ5NDk1MjAwMF9uYTFmbl9ZV2RsYm5RdGRISnBZV2RsLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzE5MjAsaF8xOTIwL2Zvcm1hdCx3ZWJwL3F1YWxpdHkscV84MCIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTc5ODc2MTYwMH19fV19&Key-Pair-Id=K2HSFNDJXOU9YS&Signature=NkoA2e8qOkTvkuk~0tb878QUjdKWY8E40a3c~XfLR8gAS50VeCKcje8ttASybTKLHkKXQlPheJocLwmh0uOd9h~gUtcPWX4CPpWXcJcE047BUtwOcjID8FzafJZd5uFLnw~uYf6hc~pttB2VgcekSq27KhwGblnrNRiF6XiahLEv0uZO5LEz8M5l5miNqNBgPfS8qEowEQCzzeP5SoTxrFsBLGKW7ErGbVPRx-xdqyXloalx6h8kY8sbazAa6GpGlImvcytKW7jCmrRLO76dhxMaj0Noa6fK8rrLShhXmlHsTT4YYen1wADfx-4iLPgDDWXI0t-5Vxcdguv9VNFhFA__",
  mirror: "https://private-us-east-1.manuscdn.com/sessionFile/rNXhLMUAC9vEf8SHfsJjYM/sandbox/hh8BPQB5CV4rTCbMBOoRqR-img-3_1770494950000_na1fn_YWdlbnQtbWlycm9y.png?x-oss-process=image/resize,w_1920,h_1920/format,webp/quality,q_80&Expires=1798761600&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9wcml2YXRlLXVzLWVhc3QtMS5tYW51c2Nkbi5jb20vc2Vzc2lvbkZpbGUvck5YaExNVUFDOXZFZjhTSGZzSmpZTS9zYW5kYm94L2hoOEJQUUI1Q1Y0clRDYk1CT29ScVItaW1nLTNfMTc3MDQ5NDk1MDAwMF9uYTFmbl9ZV2RsYm5RdGJXbHljbTl5LnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzE5MjAsaF8xOTIwL2Zvcm1hdCx3ZWJwL3F1YWxpdHkscV84MCIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTc5ODc2MTYwMH19fV19&Key-Pair-Id=K2HSFNDJXOU9YS&Signature=Mf5siPlBPuOcOdxaBLqWrc74xUmE8MKMmxq-Z0I941gCO7SIUb3KVcdk~R~GaAilPsmgEdsjXDwkj7A3jpxYnpzEgCcF9XrDksnmj8abda4r4jhufviEDh9aAWSJXrSa~aK-TBE99Zyfuv9PW~KArNsBgpDNgetQdwcpDbQ3U1-MrxLHP9fm9wAQtWSDz~9HJaYCb0AyFRwjbOiNWb0HiFtOmzrsOWlnQEmM5VsBxGvkt~-W384WVz1ZBjLdwlVaDUwiWVU9-ApaQRXypUtBH0GeOpIQbN5vaXkb1kRny6pOm9izIta1DaNUebcQCFYZjfwRCyeVNAwSEmg85pgUmA__",
  scaffolder: "https://private-us-east-1.manuscdn.com/sessionFile/rNXhLMUAC9vEf8SHfsJjYM/sandbox/hh8BPQB5CV4rTCbMBOoRqR-img-4_1770494975000_na1fn_YWdlbnQtc2NhZmZvbGRlcg.png?x-oss-process=image/resize,w_1920,h_1920/format,webp/quality,q_80&Expires=1798761600&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9wcml2YXRlLXVzLWVhc3QtMS5tYW51c2Nkbi5jb20vc2Vzc2lvbkZpbGUvck5YaExNVUFDOXZFZjhTSGZzSmpZTS9zYW5kYm94L2hoOEJQUUI1Q1Y0clRDYk1CT29ScVItaW1nLTRfMTc3MDQ5NDk3NTAwMF9uYTFmbl9ZV2RsYm5RdGMyTmhabVp2YkdSbGNnLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzE5MjAsaF8xOTIwL2Zvcm1hdCx3ZWJwL3F1YWxpdHkscV84MCIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTc5ODc2MTYwMH19fV19&Key-Pair-Id=K2HSFNDJXOU9YS&Signature=SEgWqYMpfQbzYhDfl3ri59H-azYZ2WAwpd6X~6Jhz7VFAMfUnE1sZeCC5PjJcbRDrZuUafCduhG5V1KcZQzTetcb06knfJz6BOVs8UbwyXqtV6n3-a8y2jOJ~YGN8absgZCyQ0NPZFLqeWe7kzbcgFbYhwDAGVvavuTv0SiyjEcClsJeUQrOvxgaai-0pF96w3kwIlYfLac--7K08rlIDkTXtAzqOjY90d2j5GJBv3sM8KckbLnaPWIDnU-EMebPDYDt-PjbvXpoqw6Ihku93EU996xoSHgyjdao5H8CXg9YwUSOz7CfSaSzlPPK2y3nHtFlRipq3ZwcbAxbKM90qg__",
  janitor: "https://private-us-east-1.manuscdn.com/sessionFile/rNXhLMUAC9vEf8SHfsJjYM/sandbox/hh8BPQB5CV4rTCbMBOoRqR-img-5_1770494952000_na1fn_YWdlbnQtamFuaXRvcg.png?x-oss-process=image/resize,w_1920,h_1920/format,webp/quality,q_80&Expires=1798761600&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9wcml2YXRlLXVzLWVhc3QtMS5tYW51c2Nkbi5jb20vc2Vzc2lvbkZpbGUvck5YaExNVUFDOXZFZjhTSGZzSmpZTS9zYW5kYm94L2hoOEJQUUI1Q1Y0clRDYk1CT29ScVItaW1nLTVfMTc3MDQ5NDk1MjAwMF9uYTFmbl9ZV2RsYm5RdGFtRnVhWFJ2Y2cucG5nP3gtb3NzLXByb2Nlc3M9aW1hZ2UvcmVzaXplLHdfMTkyMCxoXzE5MjAvZm9ybWF0LHdlYnAvcXVhbGl0eSxxXzgwIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzk4NzYxNjAwfX19XX0_&Key-Pair-Id=K2HSFNDJXOU9YS&Signature=VLPdH7b1SPYRlHGylpfpYoUxojtnOLEf1cvIgeVapOugwjThZbyS3fW8NeZM0rgKr-U-QTDnDgZ1~sAXTpMopTfGbu2nViPMEKeL0Bkr3GoVt-ZQdOMiL0j-4XnwrYjPOy3dKbGyFDnfjyAVtbaM~8Rlt186i-xHNDa5mWm6PwESeITBZI4P2G7GQ-HWi3xg3cQ4t4iaDq0N1Jn9ToDWo1O7YICKp8e-IfxlTeK-mWaWxqEVl1ZLnHgSvhAtrNdSJhuARBGI71dbKa7UzDi6RRFwq~ru9lXZPc-jpe37BGz-dMRgirPopDGThz-dEuKUOxnFDN01kaG8C4z8QTqtJQ__",
  gatekeeper: "https://private-us-east-1.manuscdn.com/sessionFile/rNXhLMUAC9vEf8SHfsJjYM/sandbox/sktMG9Gq3l2BEO46FntlvJ-img-1_1770495023000_na1fn_YWdlbnQtZ2F0ZWtlZXBlcg.png?x-oss-process=image/resize,w_1920,h_1920/format,webp/quality,q_80&Expires=1798761600&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9wcml2YXRlLXVzLWVhc3QtMS5tYW51c2Nkbi5jb20vc2Vzc2lvbkZpbGUvck5YaExNVUFDOXZFZjhTSGZzSmpZTS9zYW5kYm94L3NrdE1HOUdxM2wyQkVPNDZGbnRsdkotaW1nLTFfMTc3MDQ5NTAyMzAwMF9uYTFmbl9ZV2RsYm5RdFoyRjBaV3RsWlhCbGNnLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3Jlc2l6ZSx3XzE5MjAsaF8xOTIwL2Zvcm1hdCx3ZWJwL3F1YWxpdHkscV84MCIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTc5ODc2MTYwMH19fV19&Key-Pair-Id=K2HSFNDJXOU9YS&Signature=K2UG9tZHKj0jlm8iLbnMV6RVXlGexvOytvJK0lEvgH1SWQz-w4Dku7NQmn0h~JWdpMs6jPKOOH0Rgq8XZe8L9bpHPhOzlgMvEmVD8UiswHvwkaJ8XOiBHemPLI-VQSsgSeGlYUoT57V6lcopIif6B2fdunmwcGsvRVebZlacTyYm9B5CbWwVLtwwJjhxJ~q5wGnbGeuPLvOSJhza48kgvkb8UBAaVHu3JDcBS9UCzNlBJtgHmgYa9uHOXV5WFvGVRJbbRjilI8tj4xr~ARjdHOAk-Men0tjHKBRVkPL1EsQvQOJsNKmF67aP8Lp3mYGgJ36xYagNJOOTBgVVGt30cg__",
};

export interface Agent {
  id: string;
  number: number;
  name: string;
  subtitle: string;
  image: string;
  color: string;
  glowClass: string;
  borderColor: string;
  textColor: string;
  bgColor: string;
  bottleneck: string;
  description: string;
  buildingBlocks: { name: string; description: string }[];
  integrations: { system: string; type: string; purpose: string }[];
  safetyRails: { mechanism: string; implementation: string; threshold: string }[];
  crossCutting: string[];
  mermaidContext: string;
  mermaidRuntime: string;
}

export const agents: Agent[] = [
  {
    id: "auto-triage",
    number: 1,
    name: "Auto-Triage",
    subtitle: "Autonomous Incident Response",
    image: IMAGES.triage,
    color: "#22d3ee",
    glowClass: "glow-cyan",
    borderColor: "border-cyan-500/30",
    textColor: "text-cyan-400",
    bgColor: "bg-cyan-500/10",
    bottleneck: "Alert fatigue, MTTR reduction",
    description: "An autonomous incident response system that investigates production alerts, reads logs and metrics, clones repositories, reproduces errors in a sandbox, proposes root cause analysis, and drafts pull requests for fixes. Operates on the ReAct pattern — interleaving reasoning and acting in a loop.",
    buildingBlocks: [
      { name: "Orchestrator (ReAct Loop)", description: "The brain — alternates between reasoning about the problem and taking actions via tools. Wrapped in a Temporal workflow for durability." },
      { name: "Memory (Short + Long-term)", description: "Short-term holds current investigation context. Long-term uses PostgreSQL + pgvector for semantic search over runbooks and past incidents." },
      { name: "Tool Interface", description: "Standardized interface for external systems. Handles authentication, rate limiting, retries, and error normalization." },
      { name: "Sandbox", description: "Docker-based isolated execution environment. Network-isolated, resource-limited (2 vCPU, 4GB RAM, 10 min timeout), ephemeral." },
    ],
    integrations: [
      { system: "Sentry", type: "Webhook + REST API", purpose: "Receive error events, fetch stack traces, tags, breadcrumbs" },
      { system: "PagerDuty", type: "Webhook + REST API", purpose: "Receive incidents, acknowledge, escalate, resolve" },
      { system: "AWS CloudWatch", type: "AWS SDK", purpose: "Query logs, metrics, and alarms for infrastructure context" },
      { system: "GitHub", type: "REST + GraphQL API", purpose: "Clone repos, read files, create branches, commit, open PRs" },
      { system: "Slack", type: "Bolt SDK", purpose: "Post triage updates, receive human override commands" },
    ],
    safetyRails: [
      { mechanism: "Max ReAct iterations", implementation: "Hard limit on reasoning/action cycles", threshold: "15 iterations per incident" },
      { mechanism: "Circuit breaker", implementation: "Detects repeated failed actions", threshold: "3 consecutive failures → escalate" },
      { mechanism: "Sandbox isolation", implementation: "Docker with no network, CPU/memory limits", threshold: "2 vCPU, 4GB RAM, 10 min" },
      { mechanism: "Write scope restriction", implementation: "Can only create branches/PRs, never merge", threshold: "Merge requires human approval" },
      { mechanism: "Token budget", implementation: "Maximum tokens per investigation", threshold: "$5 USD ceiling per incident" },
    ],
    crossCutting: [
      "State managed by Temporal.io — survives process crashes, replays from last checkpoint",
      "Tiered model strategy: GPT-4o-mini for log analysis, Claude 3.5 Sonnet for root cause reasoning",
      "Token usage tracked per investigation and reported in Slack summary",
    ],
    mermaidContext: `graph TD
    subgraph Observability
        A[Sentry] -->|Webhook| B((Auto-Triage\\nAgent))
        C[PagerDuty] -->|Webhook| B
        D[CloudWatch] -->|API| B
    end
    subgraph Code
        B -->|API| E[GitHub]
        F[CI/CD] -->|Status| B
    end
    subgraph Comms
        B -->|Post| G[Slack]
    end
    subgraph Knowledge
        H[Runbook DB] -->|RAG| B
        I[Incident History] -->|Query| B
    end`,
    mermaidRuntime: `sequenceDiagram
    participant S as Sentry
    participant PD as PagerDuty
    participant A as Agent
    participant GH as GitHub
    participant SB as Sandbox
    participant SL as Slack
    S->>PD: Error triggers incident
    PD->>A: Webhook: New incident
    A->>SL: Investigating incident
    A->>S: Fetch stack trace
    A->>GH: Clone repository
    A->>SB: Reproduce error
    SB-->>A: Error reproduced
    A->>SB: Apply fix + run tests
    SB-->>A: Tests pass
    A->>GH: Create PR with fix
    A->>SL: Root cause + PR ready`,
  },
  {
    id: "mirror",
    number: 2,
    name: "Mirror",
    subtitle: "Test Generation Agent",
    image: IMAGES.mirror,
    color: "#2dd4bf",
    glowClass: "glow-teal",
    borderColor: "border-teal-500/30",
    textColor: "text-teal-400",
    bgColor: "bg-teal-500/10",
    bottleneck: "Test coverage gaps, deterministic proof",
    description: "An autonomous test generation system that reads production code and generates comprehensive regression test suites as 'deterministic proof' of code behavior. Uses mutation testing to validate that generated tests actually catch bugs rather than merely achieving line coverage.",
    buildingBlocks: [
      { name: "Code Analyzer", description: "Parses source code into AST and builds dependency graph. Uses LLM to understand business logic semantics beyond static analysis." },
      { name: "Test Strategist", description: "Analyzes coverage reports to identify highest-value test targets. Prioritizes by complexity, change frequency, coverage gaps, and security criticality." },
      { name: "Test Writer", description: "Generates unit tests (pytest/testing), integration tests (testcontainers), and property-based tests (Hypothesis/rapid) using LLM + RAG patterns." },
      { name: "Validator", description: "Runs mutation testing (mutmut/Stryker) to verify tests catch real bugs. Feeds surviving mutants back to the Strategist in a feedback loop." },
    ],
    integrations: [
      { system: "GitHub", type: "REST + GraphQL API", purpose: "Clone repos, read source code, create test PRs" },
      { system: "CI Pipeline", type: "GitHub Actions", purpose: "Run generated tests, collect coverage reports" },
      { system: "Coverage Tools", type: "pytest-cov / go cover", purpose: "Measure code coverage delta from generated tests" },
      { system: "Mutation Engine", type: "mutmut / Stryker", purpose: "Validate test quality via mutation score" },
    ],
    safetyRails: [
      { mechanism: "Flaky test detection", implementation: "Run each test 3x to detect non-determinism", threshold: "3 runs per test" },
      { mechanism: "Test isolation", implementation: "Fresh fixtures, mocked external deps", threshold: "No shared state between tests" },
      { mechanism: "Cost ceiling", implementation: "Maximum budget per repository scan", threshold: "$10 per run (configurable)" },
      { mechanism: "Quality gate", implementation: "Minimum mutation score for PR creation", threshold: "60% mutation score minimum" },
    ],
    crossCutting: [
      "Coverage-driven feedback loop: generate → measure → identify gaps → generate more",
      "Mutation testing as primary quality metric (not line coverage)",
      "Tiered model approach: fast models for test skeletons, capable models for integration logic",
    ],
    mermaidContext: `graph TD
    subgraph Sources
        GH[GitHub] -->|Clone| M((Mirror\\nAgent))
        CI[CI Pipeline] -->|Coverage| M
    end
    subgraph Validation
        M -->|Run Tests| CI
        M -->|Mutate| MUT[Mutation Engine]
        MUT -->|Survivors| M
    end
    subgraph Output
        M -->|Create PR| GH
        M -->|Report| DASH[Dashboard]
    end`,
    mermaidRuntime: `sequenceDiagram
    participant T as Trigger
    participant A as Mirror Agent
    participant GH as GitHub
    participant CI as CI Pipeline
    participant M as Mutation Engine
    T->>A: New code merged
    A->>GH: Clone repository
    A->>A: Parse AST + dependency graph
    A->>CI: Fetch coverage (72%)
    A->>A: Identify gaps + generate tests
    A->>CI: Run tests
    CI-->>A: Pass (coverage 81%)
    A->>M: Run mutation testing
    M-->>A: 15 surviving mutants
    A->>A: Generate mutation-killing tests
    A->>CI: Run updated suite
    CI-->>A: Mutation score: 78%
    A->>GH: Create PR with tests`,
  },
  {
    id: "scaffolder",
    number: 3,
    name: "Scaffolder",
    subtitle: "Zero-to-One Agent",
    image: IMAGES.scaffolder,
    color: "#fbbf24",
    glowClass: "glow-amber",
    borderColor: "border-amber-500/30",
    textColor: "text-amber-400",
    bgColor: "bg-amber-500/10",
    bottleneck: "Service creation friction, security baselines",
    description: "Automates the creation of new services from a declarative YAML specification. Generates a complete, production-ready repository including application code, infrastructure-as-code, security baselines, observability configuration, and CI/CD pipeline definitions. Reduces service creation from days to minutes.",
    buildingBlocks: [
      { name: "Spec Parser", description: "Validates developer's YAML spec against JSON Schema. Defines service name, language, infrastructure, integrations, team ownership, and compliance tier." },
      { name: "Template Engine", description: "Cookiecutter for deterministic boilerplate + LLM for adaptive code generation (API stubs, README, test structure)." },
      { name: "IaC Generator", description: "Generates Terraform modules from pre-approved, security-hardened templates. Composes modules based on spec requirements." },
      { name: "Security Baseline Applier", description: "Applies SAST config, dependency scanning, secrets management, container security, network security, and structured logging with PII redaction." },
      { name: "Validator", description: "Runs build, SAST scans, Terraform plan validation, linting, and security baseline verification. Produces pass/fail report." },
    ],
    integrations: [
      { system: "GitHub", type: "REST API", purpose: "Create repositories, commit generated code, open PRs" },
      { system: "Terraform Cloud", type: "API", purpose: "Manage infrastructure state, validate plans" },
      { system: "Semgrep / Bandit", type: "CLI", purpose: "SAST scanning on generated code" },
      { system: "AWS Secrets Manager", type: "AWS SDK", purpose: "Configure secrets for new services" },
      { system: "Internal Service Registry", type: "REST API", purpose: "Register new services for discovery" },
    ],
    safetyRails: [
      { mechanism: "Secure by default", implementation: "Encryption, least-privilege IAM, PII redaction", threshold: "All controls enabled by default" },
      { mechanism: "Compliance tiers", implementation: "Standard / Elevated / FedRAMP controls", threshold: "Spec-driven tier selection" },
      { mechanism: "SAST validation", implementation: "All generated code scanned before PR", threshold: "Zero critical findings" },
      { mechanism: "Template versioning", implementation: "Templates versioned in dedicated repo", threshold: "Update PRs for existing services" },
    ],
    crossCutting: [
      "Single-shot deterministic mode — output is fully verifiable (builds or doesn't)",
      "Compliance tiers: Standard → Elevated → FedRAMP with progressive controls",
      "Template versioning via Copier for updating existing services from evolving templates",
    ],
    mermaidContext: `graph TD
    DEV[Developer] -->|YAML Spec| S((Scaffolder\\nAgent))
    S -->|Create Repo| GH[GitHub]
    S -->|Generate IaC| TF[Terraform]
    S -->|Register| SR[Service Registry]
    S -->|Trigger Build| CI[CI/CD]
    S -->|SAST Scan| SAST[Semgrep]
    S -->|Fetch Baselines| SB[Security Policy]
    S -->|Configure| SM[Secrets Manager]`,
    mermaidRuntime: `sequenceDiagram
    participant D as Developer
    participant A as Scaffolder Agent
    participant GH as GitHub
    participant CI as CI Pipeline
    participant SAST as SAST Scanner
    D->>A: Submit YAML spec
    A->>A: Validate spec
    A->>A: Generate app code
    A->>A: Generate Terraform
    A->>A: Apply security baselines
    A->>SAST: Run SAST scan
    SAST-->>A: No vulnerabilities
    A->>GH: Create repository
    A->>CI: Trigger build
    CI-->>A: Build passes
    A->>GH: Open PR with project
    A->>D: Repository ready`,
  },
  {
    id: "janitor",
    number: 4,
    name: "Janitor",
    subtitle: "Refactoring Agent",
    image: IMAGES.janitor,
    color: "#34d399",
    glowClass: "glow-emerald",
    borderColor: "border-emerald-500/30",
    textColor: "text-emerald-400",
    bgColor: "bg-emerald-500/10",
    bottleneck: "Typing, dependency rot, dead code",
    description: "An autonomous technical debt remediation system that runs continuously in the background. Performs type annotation additions, dependency updates, dead code removal, code style enforcement, and security patch application. Makes small, atomic, independently reviewable changes.",
    buildingBlocks: [
      { name: "Debt Scanner", description: "Collection of sub-scanners: Type Annotation (mypy), Dependency (pip-audit), Dead Code (vulture), Code Style (ruff/black), Security Vulnerability (Snyk)." },
      { name: "Priority Ranker", description: "Scores debt items: Priority = Severity × Impact × Fixability. Security vulnerabilities with known exploits always receive maximum priority." },
      { name: "Refactorer", description: "Deterministic AST transforms for mechanical changes + LLM-guided refactoring for semantic changes. Uses OpenRewrite, Sourcery, custom Go tooling." },
      { name: "Test Runner", description: "Full test suite execution after each refactoring. Regression check comparing before/after results. Failing test aborts the change." },
      { name: "PR Creator", description: "Atomic PRs — one per debt item. Includes title, description, security advisory links, before/after snippets, and test results." },
    ],
    integrations: [
      { system: "Package Registries", type: "PyPI / Go Modules", purpose: "Version info, compatibility checks" },
      { system: "Security Advisories", type: "GitHub Advisories / NVD", purpose: "Vulnerability data for prioritization" },
      { system: "GitHub", type: "REST + GraphQL API", purpose: "Code access, PR creation" },
      { system: "CI/CD Pipeline", type: "GitHub Actions", purpose: "Test execution after refactoring" },
    ],
    safetyRails: [
      { mechanism: "Atomic changes", implementation: "Each PR changes one thing", threshold: "Single debt item per PR" },
      { mechanism: "Full test suite", implementation: "Every change must pass all tests", threshold: "Zero test regressions" },
      { mechanism: "Semantic diff analysis", implementation: "LLM reviews diff for behavioral impact", threshold: "High-risk → human review" },
      { mechanism: "Canary deployment", implementation: "High-risk changes deployed to canary first", threshold: "24h canary period" },
      { mechanism: "One-click revert", implementation: "Every PR includes revert option", threshold: "Instant rollback" },
    ],
    crossCutting: [
      "Hybrid execution: cron-based for routine maintenance, event-driven for urgent security patches",
      "Gradual typing strategy: 5% improvement per month, starting with security-critical modules",
      "Safety through incrementalism — never attempts large-scale refactors",
    ],
    mermaidContext: `graph TD
    subgraph Inputs
        PKG[Package Registries] -->|Versions| J((Janitor\\nAgent))
        SEC[Security Advisories] -->|Vulns| J
        GH[GitHub] -->|Code| J
    end
    subgraph Execution
        J -->|Run Tests| CI[CI/CD]
        CI -->|Results| J
        J -->|Create PRs| GH
    end
    subgraph Config
        POL[Policy Store] -->|Rules| J
        J -->|Metrics| DASH[Dashboard]
    end`,
    mermaidRuntime: `sequenceDiagram
    participant C as Scheduler
    participant A as Janitor Agent
    participant GH as GitHub
    participant CI as CI Pipeline
    C->>A: Trigger daily scan
    A->>GH: Clone repositories
    A->>A: Debt Scanner: full scan
    A->>A: Priority Ranker: score items
    loop Top priority items
        A->>A: Refactorer: apply fix
        A->>CI: Run test suite
        CI-->>A: Tests pass
        A->>GH: Create atomic PR
    end`,
  },
  {
    id: "gatekeeper",
    number: 5,
    name: "Gatekeeper",
    subtitle: "CI Review Agent",
    image: IMAGES.gatekeeper,
    color: "#f472b6",
    glowClass: "glow-rose",
    borderColor: "border-pink-500/30",
    textColor: "text-pink-400",
    bgColor: "bg-pink-500/10",
    bottleneck: "Security review bottleneck, compliance",
    description: "An autonomous PR review system focused on security vulnerabilities and architectural compliance. Operates as a required CI check, analyzing every PR before human review. Provides audit evidence for SOC 2 and FedRAMP compliance frameworks.",
    buildingBlocks: [
      { name: "Diff Analyzer", description: "Semantic diff parsing — classifies changes into: new functionality, bug fix, refactoring, dependency update, config change, security-relevant change." },
      { name: "Security Scanner", description: "Battery of SAST tools: Semgrep (multi-lang), Bandit (Python), gosec (Go), Snyk Code, pip-audit/nancy, Syft (SBOM)." },
      { name: "Architecture Validator", description: "Fitness functions as code: no direct DB access from handlers, no unapproved deps, service boundary enforcement, API versioning, complexity limits." },
      { name: "Compliance Checker", description: "Maps findings to SOC 2 Type II and FedRAMP controls. Every review decision logged to immutable audit trail." },
      { name: "Report Generator", description: "LLM-powered synthesis: Summary verdict, security findings by severity, architecture violations, compliance status, dependency risk assessment." },
    ],
    integrations: [
      { system: "GitHub", type: "Webhook + REST API", purpose: "Receive PR events, post review comments, set CI status" },
      { system: "Semgrep", type: "CLI", purpose: "Custom security rules, OWASP patterns" },
      { system: "Snyk", type: "API + CLI", purpose: "AI-powered vulnerability detection, dependency scanning" },
      { system: "Syft / CycloneDX", type: "CLI", purpose: "SBOM generation for supply chain visibility" },
      { system: "Audit Trail", type: "Immutable Store", purpose: "Compliance evidence for SOC 2 / FedRAMP" },
    ],
    safetyRails: [
      { mechanism: "Confidence scoring", implementation: "Low-confidence findings shown as warnings", threshold: "High confidence → block, Low → warn" },
      { mechanism: "Feedback mechanism", implementation: "Developers mark false positives, system learns", threshold: "Continuous improvement" },
      { mechanism: "Override mechanism", implementation: "Authorized engineers can override with justification", threshold: "security-reviewer role required" },
      { mechanism: "Follow-up review", implementation: "Overrides trigger review within 48 hours", threshold: "48h follow-up window" },
    ],
    crossCutting: [
      "False positive management is the primary adoption threat — confidence scoring + feedback loops",
      "Immutable audit trail for SOC 2 Type II and FedRAMP compliance evidence",
      "Parallel analysis: security, architecture, and compliance checks run concurrently",
    ],
    mermaidContext: `graph TD
    PR[GitHub PR] -->|Webhook| G((Gatekeeper\\nAgent))
    G -->|Scan| SAST[SAST Tools]
    G -->|Check| DEP[Dependency Scanner]
    G -->|SBOM| SBOM[SBOM Generator]
    G -->|Validate| ARCH[Fitness Functions]
    POL[Security Policy] -->|Rules| G
    G -->|Comment| PR
    G -->|Status| CI[CI Pipeline]
    G -->|Log| AUDIT[Audit Trail]`,
    mermaidRuntime: `sequenceDiagram
    participant D as Developer
    participant GH as GitHub
    participant A as Gatekeeper Agent
    participant SAST as SAST Tools
    participant AR as Architecture Validator
    D->>GH: Open Pull Request
    GH->>A: Webhook: PR opened
    A->>GH: Fetch diff
    A->>A: Classify changes
    par Security
        A->>SAST: Run scanners
        SAST-->>A: 2 findings
    and Architecture
        A->>AR: Evaluate rules
        AR-->>A: 1 violation
    end
    A->>A: Synthesize report
    A->>GH: Post review comment
    A->>GH: Set CI status`,
  },
];

export const painPoints = [
  { rank: 1, friction: "Integration Testing for Security-Critical Systems", timeWaste: "15-25% of sprint capacity", impact: "High", description: "Incomplete coverage creates false confidence in microservices processing email security data." },
  { rank: 2, friction: "Triaging Production Alerts (Sentry/PagerDuty)", timeWaste: "23 min per context switch", impact: "Critical", description: "Alert fatigue leads to missed incidents. Developers lose 23 minutes per context switch." },
  { rank: 3, friction: "Updating Legacy Documentation", timeWaste: "5-10% of sprint capacity", impact: "Medium", description: "Stale docs compound onboarding costs and create compliance risk." },
  { rank: 4, friction: "Scaffolding New Microservices", timeWaste: "2-5 days per new service", impact: "High", description: "Security baseline inconsistencies between services create posture gaps." },
  { rank: 5, friction: "Verifying Database Migration Safety", timeWaste: "1-3 days per migration", impact: "Critical", description: "Failed migrations cause data loss. Manual verification is error-prone." },
];

export const frameworkComparison = [
  { name: "LangChain / LangGraph", production: "Medium", debuggability: "Medium", safety: "Basic", state: "Graph-based", recommendation: "Abstraction tax, API instability, security surface area" },
  { name: "AutoGen (Microsoft)", production: "Low-Medium", debuggability: "Low", safety: "Basic", state: "Conversation only", recommendation: "Emergent behavior hard to predict in security context" },
  { name: "CrewAI", production: "Low", debuggability: "Low", safety: "Basic", state: "Task-level", recommendation: "Early stage, rigid architecture, no enterprise track record" },
  { name: "Raw APIs + Custom", production: "High", debuggability: "High", safety: "High", state: "Custom", recommendation: "Maximum control, requires engineering investment" },
  { name: "Temporal.io + Custom", production: "Very High", debuggability: "Very High", safety: "Very High", state: "Durable checkpointing", recommendation: "Recommended — battle-tested at Uber, Netflix, Stripe" },
];

export const riskMatrix = [
  { risk: "LLM Hallucination in Code", severity: "Critical", likelihood: "High", mitigation: "Multi-layer validation: SAST, test execution, human review. RAG grounding. Dependency verification." },
  { risk: "Agent Drift in Long-Running Tasks", severity: "High", likelihood: "Medium", mitigation: "Temporal checkpointing, periodic goal re-validation, max iteration limits." },
  { risk: "Context Window Exhaustion", severity: "Medium", likelihood: "High", mitigation: "RAG for long-term memory, aggressive context pruning, tiered model selection." },
  { risk: "Cost Explosion (Token Usage)", severity: "High", likelihood: "Medium", mitigation: "Per-task cost ceilings ($5-$10), tiered model strategy, caching, dashboards." },
  { risk: "Security Breach via Agent", severity: "Critical", likelihood: "Low", mitigation: "Least privilege, sandbox isolation, no production write access, audit logging." },
  { risk: "Supply Chain Attack (Slopsquatting)", severity: "Critical", likelihood: "Medium", mitigation: "Dependency allowlist, package verification, SBOM generation." },
  { risk: "Graph Data Staleness", severity: "High", likelihood: "Medium", mitigation: "Health-check monitors vs source-of-truth; NATS durable subscriptions with replay; staleness TTLs on graph nodes." },
  { risk: "RLM Cost Unpredictability", severity: "High", likelihood: "Medium", mitigation: "max_cost wrapper with spend tracking; RLM only for >50K token contexts; cost-tiered model routing." },
  { risk: "Multi-Store Consistency", severity: "Medium", likelihood: "Medium", mitigation: "Event-sourced writes through NATS for ordering; version vectors on graph nodes; bounded staleness guarantees." },
  { risk: "AG-UI Protocol Evolution", severity: "Medium", likelihood: "High", mitigation: "Internal adapter abstraction layer; pin to specific protocol versions; contribute to specification." },
  { risk: "CopilotKit Version Churn", severity: "Low", likelihood: "High", mitigation: "Pin major versions; maintain adapter layer between CopilotKit hooks and application components." },
];

export const roadmap = [
  { phase: "Phase 1: Foundation", days: "Days 1-30", milestones: [
    { week: "1-2", milestone: "Infrastructure Setup", deliverable: "Temporal cluster, PostgreSQL + pgvector, Docker sandbox" },
    { week: "2-3", milestone: "Custom Framework v0.1", deliverable: "ReAct loop engine, tool interface, basic memory" },
    { week: "3-4", milestone: "Gatekeeper Agent MVP", deliverable: "SAST integration, dependency scanning, PR commenting" },
  ]},
  { phase: "Phase 2: Expansion", days: "Days 31-60", milestones: [
    { week: "5-6", milestone: "Janitor Agent MVP", deliverable: "Dependency updates, dead code detection, atomic PRs" },
    { week: "6-7", milestone: "Auto-Triage Agent MVP", deliverable: "Sentry/PagerDuty integration, log analysis (no fix gen)" },
    { week: "7-8", milestone: "Long-term Memory", deliverable: "pgvector integration, RAG pipeline for runbooks" },
  ]},
  { phase: "Phase 3: Maturation", days: "Days 61-90", milestones: [
    { week: "9-10", milestone: "Mirror Agent MVP", deliverable: "Unit test gen for Python, coverage loop, mutation testing" },
    { week: "10-11", milestone: "Auto-Triage Fix Generation", deliverable: "Sandbox-based fix gen, PR creation for simple fixes" },
    { week: "11-12", milestone: "Scaffolder Agent MVP", deliverable: "Python/FastAPI scaffolding, Terraform, security baselines" },
  ]},
  { phase: "Phase 4: Context Engine Foundation", days: "Days 91-120", milestones: [
    { week: "13-14", milestone: "Context Stores Deployment", deliverable: "Neo4j cluster + pgvector extension; CocoIndex pipeline for GitHub webhooks" },
    { week: "15-16", milestone: "Context Graph API", deliverable: "Go/gRPC query planner + context assembler; NATS JetStream cluster" },
    { week: "17-18", milestone: "Agent Integration", deliverable: "Redis L2 cache; Auto-Triage reads from Context Engine" },
  ]},
  { phase: "Phase 5: Context Engine Maturation", days: "Days 121-150", milestones: [
    { week: "19-20", milestone: "Full Event-Driven Flow", deliverable: "CocoIndex pipelines for Sentry, PagerDuty, CI/CD events" },
    { week: "21-22", milestone: "RLM Integration", deliverable: "RLM for Auto-Triage and Janitor; Docker-sandboxed REPL environments" },
    { week: "23-24", milestone: "Analytics Pipeline", deliverable: "Apache Arrow Flight for metrics; TimescaleDB hypertables" },
  ]},
  { phase: "Phase 6: Generative UI Layer", days: "Days 151-180", milestones: [
    { week: "25-26", milestone: "AG-UI + CopilotKit Scaffold", deliverable: "Temporal-to-AG-UI adapter; useCoAgent per agent" },
    { week: "27-28", milestone: "Agent Dashboards", deliverable: "Triage timeline, Gatekeeper approval cards, HITL flows" },
    { week: "29-30", milestone: "MCP Apps + Production", deliverable: "Rich tool UIs, three-tier generative UI model, production deployment" },
  ]},
];

export const successMetrics = [
  { metric: "MTTR (Mean Time to Resolution)", baseline: "4 hours", target: "1 hour", agent: "Auto-Triage" },
  { metric: "Test Coverage", baseline: "65%", target: "80%", agent: "Mirror" },
  { metric: "Service Creation Time", baseline: "3 days", target: "30 minutes", agent: "Scaffolder" },
  { metric: "Security Review Turnaround", baseline: "2 days", target: "2 hours", agent: "Gatekeeper" },
  { metric: "Dependency Currency", baseline: "60% up-to-date", target: "95% up-to-date", agent: "Janitor" },
];

// ============================================================
// Context Engine
// ============================================================

export interface ContextSubsystem {
  id: string;
  name: string;
  technology: string;
  color: string;
  icon: string;
  description: string;
  role: string;
  justification: string;
}

export const contextEngine = {
  title: "Platform-Core Context Engine",
  subtitle: "Unified Context Substrate for All Five Agents",
  description:
    "The Context Engine is the central nervous system of the platform — a living, continuously-updated representation of the entire engineering organization's state. Rather than each agent independently gathering context from disparate sources, the Context Engine maintains a unified knowledge layer spanning code, infrastructure, incidents, deployments, team topology, and operational history.",
  mermaidArchitecture: `graph TB
    subgraph External["External Systems"]
        GH[GitHub]
        SENTRY[Sentry]
        PD[PagerDuty]
        CLOUD[AWS / Cloud]
        CICD[CI/CD Pipelines]
    end

    subgraph Ingestion["Ingestion Layer"]
        WH[Webhook Gateway]
        COCO[CocoIndex Pipeline]
    end

    subgraph Engine["Context Engine"]
        API[Context Graph API\\nGo / gRPC]
        QP[Query Planner]
        CA[Context Assembler]

        subgraph Stores["Data Stores"]
            NEO[Neo4j 5.x + Graphiti\\nKnowledge Graph]
            PGV[pgvector\\nVector Store]
            PG[PostgreSQL + TimescaleDB\\nStructured Store]
            REDIS[Redis\\nContext Cache L2]
        end

        subgraph Events["Event Infrastructure"]
            NATS[NATS JetStream\\nEvent Bus]
        end

        subgraph IPC["Data Interchange"]
            ARROW[Apache Arrow / Flight\\nGo-Python Zero-Copy]
        end
    end

    subgraph AgentLayer["Agent Layer"]
        AT[Auto-Triage]
        MI[Mirror]
        SC[Scaffolder]
        JA[Janitor]
        GK[Gatekeeper]
    end

    External --> WH
    WH --> NATS
    NATS --> COCO
    COCO --> NEO
    COCO --> PGV
    COCO --> PG

    API --> QP
    QP --> CA
    CA --> NEO
    CA --> PGV
    CA --> PG
    CA --> REDIS
    CA --> ARROW

    NATS --> API

    AgentLayer --> API
    API --> AgentLayer`,
  mermaidDataFlow: `sequenceDiagram
    participant GH as GitHub
    participant WH as Webhook Gateway
    participant NATS as NATS JetStream
    participant COCO as CocoIndex
    participant NEO as Neo4j
    participant PGV as pgvector
    participant PG as PostgreSQL
    participant REDIS as Redis
    participant AT as Auto-Triage Agent

    GH->>WH: Push event / PR opened
    WH->>NATS: Publish event
    par Store Updates
        NATS->>COCO: Trigger indexing
        COCO->>NEO: Update knowledge graph
        COCO->>PGV: Update embeddings
        COCO->>PG: Update structured records
    and Cache Invalidation
        NATS->>REDIS: Invalidate affected keys
    and Agent Triggers
        NATS->>AT: Notify relevant agents
    end`,
};

export const contextEngineSubsystems: ContextSubsystem[] = [
  {
    id: "knowledge-graph",
    name: "Knowledge Graph",
    technology: "Neo4j 5.x + Graphiti",
    color: "#22d3ee",
    icon: "graph",
    description:
      "Service topology, dependency tracking, team ownership, incident relationships, and temporal bi-tracking via Graphiti for agent episodic memory.",
    role: "Answers 'what entities are related?' via traversal-based context discovery",
    justification:
      "Industry-standard graph DB with GDS library; Graphiti adds temporal bi-tracking and episodic memory for agents.",
  },
  {
    id: "vector-store",
    name: "Vector Store",
    technology: "pgvector (PostgreSQL)",
    color: "#a78bfa",
    icon: "search",
    description:
      "Semantic similarity search over code, documentation, runbooks, and past incidents using HNSW indexes on the shared PostgreSQL instance.",
    role: "Answers 'what content is semantically similar?' via embedding-based retrieval",
    justification:
      "Single PostgreSQL instance for both structured + vector data; HNSW indexes; avoids additional operational burden.",
  },
  {
    id: "structured-store",
    name: "Structured Store",
    technology: "PostgreSQL + TimescaleDB",
    color: "#2dd4bf",
    icon: "database",
    description:
      "Operational records, deployment metadata, configuration state, and time-series metrics via TimescaleDB hypertables.",
    role: "Provides exact-match queries for deployment records, metrics, and configuration",
    justification:
      "Battle-tested relational DB; TimescaleDB hypertables for time-series; same instance as pgvector.",
  },
  {
    id: "indexing-pipeline",
    name: "Indexing Pipeline",
    technology: "CocoIndex",
    color: "#fbbf24",
    icon: "refresh",
    description:
      "Incremental processing pipeline that synchronizes data from external sources into all stores — Neo4j, pgvector, and PostgreSQL.",
    role: "Keeps all stores synchronized with source-of-truth systems",
    justification:
      "Incremental processing; multi-target export (Neo4j + pgvector + PG); Rust performance core.",
  },
  {
    id: "event-streaming",
    name: "Event Streaming",
    technology: "NATS JetStream",
    color: "#34d399",
    icon: "radio",
    description:
      "Real-time event bus for webhook ingestion, agent notifications, cache invalidation, and inter-agent coordination via durable streams.",
    role: "Provides real-time event distribution and durable message delivery",
    justification:
      "Lightweight; Go-native; request/reply pattern; durable streams; low operational overhead vs Kafka.",
  },
  {
    id: "data-interchange",
    name: "Data Interchange",
    technology: "Apache Arrow / Flight",
    color: "#f472b6",
    icon: "arrows",
    description:
      "Zero-copy Go-to-Python data interchange for metrics and time-series data. Used selectively for large analytical payloads.",
    role: "Eliminates serialization overhead for cross-language data transfer",
    justification:
      "Zero-copy IPC between Go and Python; columnar format ideal for time-series; selective use for large payloads.",
  },
  {
    id: "context-cache",
    name: "Context Cache",
    technology: "Redis",
    color: "#ef4444",
    icon: "zap",
    description:
      "Low-latency L2 cache for assembled context payloads with TTL-based expiry and event-driven invalidation via NATS subscriptions.",
    role: "Reduces repeated context assembly cost with sub-millisecond reads",
    justification:
      "Industry-standard cache; TTL + event-driven invalidation; sub-ms latency for hot context.",
  },
  {
    id: "rlm-engine",
    name: "RLM Reasoning Engine",
    technology: "Python (rlms library)",
    color: "#818cf8",
    icon: "brain",
    description:
      "Recursive Language Model engine that decomposes unbounded context into manageable sub-LLM calls, mitigating context rot at scale.",
    role: "Enables agents to reason over assembled context at arbitrary scale without degradation",
    justification:
      "MIT-licensed; recursive decomposition; custom tools injection; Docker sandboxing for production.",
  },
];

// ============================================================
// RLM Innovation
// ============================================================

export const rlmInnovation = {
  title: "RLM-Inspired Context Management",
  subtitle: "Key Innovation: Recursive Decomposition for Unbounded Context",
  description:
    "The Recursive Language Model (RLM) approach from Zhang & Kraska (arXiv:2512.24601) provides the core innovation for the Context Engine's ability to handle unbounded context without degradation. Rather than feeding assembled context directly into an LLM's token window, RLM treats context as an external environment variable accessible through a Python REPL.",
  howItWorks:
    "The root LLM never sees the full context. Instead, it writes Python code to inspect, filter, partition, and process context through sub-LLM calls. This creates a recursive tree of bounded-context LLM invocations where each call operates on a manageable subset.",
  strategies: [
    {
      name: "Peeking",
      description: "Examine the first portion of context to understand structure, format, and length before deciding on a decomposition strategy.",
    },
    {
      name: "Grepping",
      description: "Use regex/keyword filtering to narrow the search space before launching semantic processing on relevant subsets.",
    },
    {
      name: "Partition + Map",
      description: "Chunk context uniformly and launch parallel sub-LLM calls on each chunk for concurrent analysis.",
    },
    {
      name: "Iterative Summarization",
      description: "Chunk by semantic boundaries, summarize each chunk, then aggregate summaries into a coherent whole.",
    },
    {
      name: "Variable Stitching",
      description: "Store sub-call outputs in REPL variables and build the final answer programmatically through code.",
    },
  ],
  contextRotMitigation:
    "Context rot — the degradation in accuracy as context length increases — is mitigated because each individual LLM call operates on a manageable subset. The root LLM's context grows slowly, containing only its reasoning trace and truncated code execution results.",
  divisionOfLabor: [
    { layer: "Knowledge Graph", responsibility: "What entities are related?" },
    { layer: "Vector Store", responsibility: "What content is semantically similar?" },
    { layer: "RLM Engine", responsibility: "How to reason over all assembled context without degradation?" },
  ],
  benchmarks: [
    { benchmark: "OOLONG (132K)", contextSize: "132K tokens", baseModel: "GPT-5: 44%", rlm: "RLM(GPT-5-mini)", improvement: "+114%" },
    { benchmark: "BrowseComp+", contextSize: "~10M tokens", baseModel: "GPT-5: ~0%", rlm: "RLM(GPT-5): 91-100%", improvement: "Enabling" },
    { benchmark: "OOLONG-Pairs", contextSize: "Quadratic", baseModel: "GPT-5: 0.04%", rlm: "RLM: 58%", improvement: "1450x" },
    { benchmark: "CodeQA", contextSize: "Large", baseModel: "GPT-5: 24%", rlm: "RLM: 62%", improvement: "+158%" },
  ],
};

// ============================================================
// Generative UI Layer
// ============================================================

export interface UIFramework {
  name: string;
  type: string;
  description: string;
  generativeUI: string;
  hitl: string;
  multiAgent: string;
  temporalIntegration: string;
  maturity: string;
  color: string;
}

export const uiLayer = {
  title: "Generative UI / UX Layer",
  subtitle: "AG-UI Protocol + CopilotKit + MCP Apps",
  description:
    "The UI layer implements a three-protocol architecture: AG-UI for real-time agent-to-frontend communication, CopilotKit for React-based agent UI components, and MCP Apps for rich tool-specific visualizations in AI chat clients.",
  mermaidArchitecture: `graph TB
    subgraph Frontend["React Frontend - CopilotKit"]
        SIDE[CopilotSidebar]
        TRIAGE_P[Auto-Triage Panel\\nuseCoAgent]
        MIRROR_P[Mirror Panel\\nuseCoAgent]
        SCAFFOLD_P[Scaffolder Panel\\nuseCoAgent]
        JANITOR_P[Janitor Panel\\nuseCoAgent]
        GATE_P[Gatekeeper Panel\\nuseCoAgent]
    end

    subgraph Protocol["AG-UI Transport Layer"]
        SSE[SSE Event Stream]
        EVENTS[Typed Events:\\nLifecycle / Text / ToolCall\\nState / Reasoning]
    end

    subgraph Adapter["Temporal-to-AG-UI Adapter"]
        RUN[RUN_STARTED / FINISHED]
        STATE[STATE_SNAPSHOT / DELTA]
        TOOL[TOOL_CALL_START / ARGS / END]
        RESULT[TOOL_RESULT receiver]
    end

    subgraph Orchestration["Temporal.io Workflows"]
        W1[Auto-Triage Workflow]
        W2[Mirror Workflow]
        W3[Scaffolder Workflow]
        W4[Janitor Workflow]
        W5[Gatekeeper Workflow]
    end

    subgraph MCP["MCP Apps - Rich Tool UIs"]
        MCP1[Triage Timeline]
        MCP2[Diff Viewer]
        MCP3[CI Pipeline Viz]
    end

    Frontend <--> SSE
    SSE <--> EVENTS
    EVENTS <--> Adapter
    Adapter <--> Orchestration
    MCP --- Frontend`,
  mermaidHITL: `sequenceDiagram
    participant A as Agent Workflow
    participant T as Temporal
    participant AGUI as AG-UI Adapter
    participant UI as React Frontend
    participant H as Human Operator

    A->>T: Request approval
    T->>T: workflow.wait_for_signal("approval")
    T->>AGUI: Emit ToolCallStart
    AGUI->>UI: SSE: TOOL_CALL_START event
    UI->>H: Render approval card
    H->>UI: Approve / Reject
    UI->>AGUI: TOOL_RESULT response
    AGUI->>T: Send signal("approval", result)
    T->>A: Resume workflow`,
};

export const uiFrameworks: UIFramework[] = [
  {
    name: "CopilotKit",
    type: "Framework",
    description: "Full-stack React framework for agent-native UIs, rebuilt natively on AG-UI since v1.50.",
    generativeUI: "First-class (useCoAgentStateRender)",
    hitl: "renderAndWaitForResponse",
    multiAgent: "Multiple CoAgents with independent state",
    temporalIntegration: "Custom AG-UI adapter",
    maturity: "High",
    color: "#22d3ee",
  },
  {
    name: "AG-UI Protocol",
    type: "Protocol",
    description: "Open, lightweight event-based protocol standardizing agent-to-frontend communication.",
    generativeUI: "Enables it (transport layer)",
    hitl: "TOOL_CALL + TOOL_RESULT events",
    multiAgent: "Multiple parallel event streams",
    temporalIntegration: "Custom adapter (thin layer)",
    maturity: "High",
    color: "#a78bfa",
  },
  {
    name: "MCP Apps",
    type: "Extension",
    description: "Official MCP extension for sandboxed iframe tool UIs in AI chat clients.",
    generativeUI: "Yes (sandboxed iframe HTML)",
    hitl: "Intent-based messaging (Shopify pattern)",
    multiAgent: "N/A (tool-level)",
    temporalIntegration: "MCP server wrapper",
    maturity: "Medium-High",
    color: "#fbbf24",
  },
  {
    name: "Vercel AI SDK",
    type: "SDK",
    description: "Provider-agnostic TypeScript toolkit for streaming, tool calling, and RSC-based generative UI.",
    generativeUI: "Yes (streamUI / RSC)",
    hitl: "Manual (addToolResult)",
    multiAgent: "Not built-in",
    temporalIntegration: "Custom implementation",
    maturity: "High",
    color: "#2dd4bf",
  },
  {
    name: "A2UI (Google)",
    type: "Spec",
    description: "Declarative JSON spec for agent-emitted UI components, rendered by client-side catalogs.",
    generativeUI: "Yes (declarative JSON)",
    hitl: "Actions in JSON payloads",
    multiAgent: "N/A",
    temporalIntegration: "N/A",
    maturity: "Low-Medium",
    color: "#f472b6",
  },
];

export interface AgentUIMapping {
  agentId: string;
  agentName: string;
  color: string;
  components: { name: string; description: string }[];
}

export const agentUIMappings: AgentUIMapping[] = [
  {
    agentId: "auto-triage",
    agentName: "Auto-Triage",
    color: "#22d3ee",
    components: [
      { name: "Investigation Timeline", description: "Real-time visualization of triage steps, log analysis, and hypothesis formation" },
      { name: "Log Viewer", description: "Filterable, searchable log stream with LLM-highlighted anomalies" },
      { name: "Metric Charts", description: "Time-series charts for CPU, memory, error rates around incident window" },
      { name: "Root Cause Tree", description: "Interactive causal chain from symptom to root cause" },
    ],
  },
  {
    agentId: "mirror",
    agentName: "Mirror",
    color: "#2dd4bf",
    components: [
      { name: "Coverage Heatmap", description: "Visual file-level coverage overlay showing gaps and improvements" },
      { name: "Mutation Dashboard", description: "Mutation testing scores with surviving mutant details" },
      { name: "Test Diff Viewer", description: "Side-by-side view of generated tests with source code context" },
    ],
  },
  {
    agentId: "scaffolder",
    agentName: "Scaffolder",
    color: "#fbbf24",
    components: [
      { name: "Project Structure Tree", description: "Interactive file tree of the generated repository structure" },
      { name: "Dependency Graph", description: "Visual dependency map of generated infrastructure and service connections" },
      { name: "Security Baseline Checklist", description: "Compliance status for each security control applied" },
    ],
  },
  {
    agentId: "janitor",
    agentName: "Janitor",
    color: "#34d399",
    components: [
      { name: "Code Smell Heatmap", description: "Repository-wide visualization of tech debt hotspots by severity" },
      { name: "Refactoring Diff Viewer", description: "Before/after code comparison with semantic change annotations" },
      { name: "Debt Trend Charts", description: "Time-series tracking of debt reduction across repositories" },
    ],
  },
  {
    agentId: "gatekeeper",
    agentName: "Gatekeeper",
    color: "#f472b6",
    components: [
      { name: "Security Audit Report", description: "Structured findings by severity with OWASP mapping and remediation guidance" },
      { name: "Compliance Checklist", description: "SOC 2 / FedRAMP control mapping with pass/fail status" },
      { name: "Approval Cards", description: "Human-in-the-loop approval UI with context, diff preview, and one-click actions" },
      { name: "SBOM Viewer", description: "Software Bill of Materials with vulnerability cross-reference" },
    ],
  },
];

// ============================================================
// Updated Table of Contents, Roadmap, Risk Matrix
// ============================================================

export const tocSections = [
  { id: "executive-summary", label: "Executive Summary", number: "01" },
  { id: "pain-points", label: "Pain Points", number: "02" },
  { id: "agents", label: "The Five Agents", number: "03" },
  { id: "context-engine", label: "Context Engine", number: "04" },
  { id: "generative-ui", label: "Generative UI", number: "05" },
  { id: "implementation", label: "Build vs. Buy", number: "06" },
  { id: "risks", label: "Risk Assessment", number: "07" },
  { id: "roadmap", label: "Roadmap", number: "08" },
  { id: "references", label: "References", number: "09" },
];
